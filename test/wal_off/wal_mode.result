test_run = require('test_run').new()
---
...
test_run:cmd("push filter '"..box.cfg.snap_dir.."' to '<dir>'")
---
- true
...
box.cfg.wal_mode
---
- none
...
space = box.schema.space.create('tweedledum')
---
...
index = space:create_index('primary', { type = 'hash' })
---
...
space:insert{1}
---
- [1]
...
space:insert{2}
---
- [2]
...
space:insert{3}
---
- [3]
...
space.index['primary']:get(1)
---
- [1]
...
space.index['primary']:get(2)
---
- [2]
...
space.index['primary']:get(3)
---
- [3]
...
space.index['primary']:get(4)
---
...
box.snapshot()
---
- ok
...
box.snapshot()
---
- error: file '<dir>/00000000000000000031.snap'
    already exists
...
space:truncate()
---
...
box.snapshot()
---
- ok
...
space:drop()
---
...
test_run:cmd("clear filter")
---
- true
...
